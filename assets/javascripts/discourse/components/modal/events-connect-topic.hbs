<DModal
  class="events-connect-topic-modal"
  @title={{i18n "admin.events.event.connect.title"}}
  @closeModal={{@closeModal}}
  @flash={{this.flash}}
>
  <:body>
    <div class="control-group">
      <label>{{i18n "admin.events.event.connect.event"}}</label>
      <span class="event-label">{{model.event.name}}</span>
    </div>

    <div class="control-group">
      <label class="checkbox-label">
        <Input
          @type="checkbox"
          @checked={{this.createTopic}}
          disabled={{this.topicId}}
        />
        {{i18n "admin.events.event.connect.create_topic"}}
      </label>
    </div>
    <div class="control-group">
      <label>{{i18n "admin.events.event.connect.connect_topic"}}</label>
      <TopicChooser
        @value={{this.topicId}}
        @onChange={{action (mut this.topicId)}}
        @options={{hash
          additionalFilters="without_event"
          disabled=this.createTopic
        }}
      />
    </div>
    <div class="control-group">
      <label>{{i18n "admin.events.event.connect.client"}}</label>
      <EventsSubscriptionSelector
        @value={{this.client}}
        @feature="source"
        @attribute="client"
        @onChange={{action (mut this.client)}}
        class="connection-client"
        options={{hash none="admin.events.connection.client.select"}}
      />
    </div>
  </:body>
  <:footer>
    <DButton
      @class="btn-primary"
      @action={{action "connect"}}
      @label="admin.events.event.connect.label"
      disabled={{connectDisabled}}
    />
    <DButton
      @class="btn-danger"
      @label="cancel"
      @action={{action "cancel"}}
      disabled={{connecting}}
    />
    <ConditionalLoadingSpinner @condition={{connecting}} @size="small" />
  </:footer>
</DModal>